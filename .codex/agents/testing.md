# ì—ì´ì „íŠ¸ í…ŒìŠ¤íŒ… ê·œì¹™ (Playwright)

---
agent_spec: v1  
doc: testing  
scope: repo  
precedence: 120  
language: ko  
---

ì´ ë¬¸ì„œëŠ” **E2E/í†µí•© í…ŒìŠ¤íŠ¸** ê·œì¹™ì„ ì •ì˜í•œë‹¤.  
Global ê·œì¹™(`AGENTS.md`)ë³´ë‹¤ **ìš°ì„ (precedence 120)** ì ìš©ëœë‹¤.

---

## ğŸ“¦ ë„êµ¬/ë²„ì „
- ëŸ¬ë„ˆ: Playwright `@playwright/test` (1.40+)
- Node.js 18+, TypeScript 5+, JavaScript ES2022+
- ë¸Œë¼ìš°ì €: Chromium / Firefox / WebKit
- ê¸°ë³¸ ì„¤ì •: `playwright.config.ts` (ì›¹ ì„œë²„ ìë™ ê¸°ë™)

---

## ğŸ“ í´ë” êµ¬ì¡° (ê¸°ëŠ¥ ê¸°ì¤€ + ì „ì œ ì ‘ë¯¸ì‚¬)
ê¸°ëŠ¥(ë„ë©”ì¸)ë³„ í´ë”ë§Œ ë§Œë“¤ê³ , **ë¡œê·¸ì¸/ë¹„ë¡œê·¸ì¸ ì „ì œëŠ” íŒŒì¼ëª… ì ‘ë¯¸ì‚¬ë¡œ êµ¬ë¶„**í•œë‹¤.

```text
e2e/
â”œâ”€â”€ specs/
â”‚  â”œâ”€â”€ like/
â”‚  â”‚  â”œâ”€â”€ like.auth.spec.ts    # ë¡œê·¸ì¸ ì‚¬ìš©ì
â”‚  â”‚  â””â”€â”€ like.guest.spec.ts   # ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ì
â”‚  â”œâ”€â”€ comment/
â”‚  â”‚  â”œâ”€â”€ comment.auth.spec.ts
â”‚  â”‚  â””â”€â”€ comment.guest.spec.ts
â”‚  â”œâ”€â”€ bookmark/
â”‚  â”‚  â”œâ”€â”€ bookmark.auth.spec.ts
â”‚  â”‚  â””â”€â”€ bookmark.guest.spec.ts
â”œâ”€â”€ fixtures/
â”‚  â”œâ”€â”€ auth.fixture.ts
â”‚  â””â”€â”€ guest.fixture.ts
â”œâ”€â”€ page-objects/
â”‚  â”œâ”€â”€ base.page.ts
â”‚  â”œâ”€â”€ recipe.page.ts
â”‚  â””â”€â”€ navbar.fragment.ts
â”œâ”€â”€ utils/
â”‚  â”œâ”€â”€ test-helpers.ts
â”‚  â””â”€â”€ visual-helpers.ts
â””â”€â”€ playwright.config.ts
```

* **ë¡œê·¸ì¸ ì „ì œ**: `*.auth.spec.ts`
* **ë¹„ë¡œê·¸ì¸ ì „ì œ**: `*.guest.spec.ts`
* íŒŒì¼ëª…ì€ `ê¸°ëŠ¥.ì „ì œ.spec.ts` í˜•ì‹ì„ ìœ ì§€í•œë‹¤(ì˜ˆ: `like.auth.spec.ts`).


## â–¶ ì‹¤í–‰ ëª…ë ¹

* ì „ì²´: `yarn test:e2e`
* UI ëª¨ë“œ: `yarn test:e2e:ui`
* Headed: `yarn test:e2e:headed`
* ë¦¬í¬íŠ¸: `yarn test:e2e:report`

---

## ğŸŒ í™˜ê²½/ì‹œí¬ë¦¿

* ì•± ê¸°ë³¸ URLì€ `.env`ì˜ `BASE_URL`/`NEXT_PUBLIC_BASE_URL`ì—ì„œ íŒŒìƒ (í•˜ë“œì½”ë”© ê¸ˆì§€).
* ë¯¼ê° ì •ë³´ëŠ” í™˜ê²½ë³€ìˆ˜ë¡œë§Œ ì£¼ì…. `.env`ëŠ” ì»¤ë°‹ ê¸ˆì§€, `.env.example`ë¡œ ë¬¸ì„œí™”.
* DB/ì™¸ë¶€ ì„œë¹„ìŠ¤ëŠ” **ìµœì†Œ ì‹œë“œ** ì›ì¹™. í…ŒìŠ¤íŠ¸ ê°„ **ìƒíƒœ ê³µìœ  ê¸ˆì§€**.

---

## âš™ Playwright ì„¤ì • ê°€ì´ë“œ

- **í•„ìˆ˜ ë¸Œë¼ìš°ì €**: Safari(WebKit), Chrome(Chromium)  
- ëª¨ë“  ì‹œë‚˜ë¦¬ì˜¤ëŠ” ìµœì†Œ 2ê°œì˜ ë¸Œë¼ìš°ì €ì—ì„œ ë³‘ë ¬ ì‹¤í–‰í•œë‹¤.  
- ì¶”ê°€ ë¸Œë¼ìš°ì €(Firefox ë“±)ëŠ” í•„ìš” ì‹œ CI matrixì— í™•ì¥í•œë‹¤.

---

## ğŸ” ë¡œì¼€ì´í„° ìš°ì„ ìˆœìœ„ (TestID-First)

### ì›ì¹™

* ìµœìš°ì„ ìœ¼ë¡œ `getByTestId`ë¥¼ ì‚¬ìš©í•œë‹¤.
* ë¶ˆê°€í”¼í•˜ê²Œ ë‹¤ë¥¸ ë¡œì¼€ì´í„°(`getByRole`, `getByLabel`, `locator()` ë“±)ë¥¼ ì“¸ ê²½ìš° â†’ **ë°˜ë“œì‹œ ê·¼ê±° ì£¼ì„**ì„ ë‚¨ê¸´ë‹¤.

### ê·œì¹™

1. ëª¨ë“  ì£¼ìš” ìƒí˜¸ì‘ìš© ìš”ì†Œì—ëŠ” `data-testid`ë¥¼ ë¶€ì—¬í•œë‹¤.
2. í…ŒìŠ¤íŠ¸ ì½”ë“œì—ì„œëŠ” `page.getByTestId('<id>')`ë¥¼ ìµœìš°ì„ ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤.
3. ë‹¤ë¥¸ ë¡œì¼€ì´í„° ì‚¬ìš© ì‹œ `// locator-justification: ...` ì£¼ì„ìœ¼ë¡œ ì´ìœ ë¥¼ ì„¤ëª…í•œë‹¤.
4. CSS/XPath ë‹¨ë… ì‚¬ìš©ì€ ìµœí›„ì˜ ìˆ˜ë‹¨ì´ë‹¤.

### TestID ë„¤ì´ë° ê°€ì´ë“œ

* **ì¼€ë°¥ì¼€ì´ìŠ¤** ì‚¬ìš©: `like-button`, `like-count`, `profile-save-button`
* **ê³ ìœ Â·ì˜ë¯¸ ì¤‘ì‹¬**: `btn1`, `item` ë“± ëª¨í˜¸/ì¤‘ë³µ ê¸ˆì§€

### ì˜ˆì‹œ

```ts
// âœ… ê¶Œì¥
await page.getByTestId('like-button').click();

// í—ˆìš© (ê·¼ê±° ì£¼ì„ í•„ìˆ˜)
// locator-justification: ì ‘ê·¼ì„± ë ˆì´ë¸” ê²€ì¦ ëª©ì 
await page.getByRole('button', { name: 'ì¢‹ì•„ìš”' }).click();
```

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì‘ì„± ê·œì¹™

* **ìœ„ì¹˜**: `e2e/specs/<ê¸°ëŠ¥>/<ê¸°ëŠ¥>.(auth|guest).spec.ts`
* **ë…ë¦½ì„±**: ìƒíƒœ ê³µìœ  ê¸ˆì§€, ìƒì„±/ì‚­ì œëŠ” API/ì‹œë“œ ìœ í‹¸ í™œìš©, ì”ì—¬ ìƒíƒœ ì œê±°
* **ë™ê¸°í™”**: `waitForLoadState('networkidle')`, ì›¹-í¼ìŠ¤íŠ¸ assertion ì‚¬ìš©
* **ê¸ˆì§€**: ë¬´ì˜ë¯¸í•œ `waitForTimeout`, í•˜ë“œì½”ë”© URL/ì‹œí¬ë¦¿
* **í”Œë ˆì´í¬**: ì›ì¸ ë‚¨ê¸°ê³  ì„ì‹œ ê²©ë¦¬(`test.fixme`), 7ì¼ ë‚´ ë³µêµ¬
* **íƒœê¹…**: ì œëª© ì ‘ë‘ì–´ë¡œ `[smoke]`, `[slow]` ë“± íƒœê·¸ë¥¼ ë¶™ì—¬ ì„ íƒ ì‹¤í–‰ì„ ì§€ì›í•œë‹¤.

---

## âœ… Definition of Done (E2E)

* [ ] ëª©ì /ì‚¬ìš©ì í–‰ìœ„ê°€ ì œëª©ì— ë“œëŸ¬ë‚¨
* [ ] ê°€ëŠ¥í•œ ê³³ì—ì„œ `getByTestId` ì‚¬ìš©
* [ ] ë‹¤ë¥¸ ë¡œì¼€ì´í„° ì‚¬ìš© ì‹œ `locator-justification` ì£¼ì„ ìˆìŒ
* [ ] ë°ì´í„° ê²©ë¦¬/ì •ë¦¬ ë³´ì¥
* [ ] ì „ì œë³„ íŒŒì¼ ì ‘ë¯¸ì‚¬ ì ìš©(`.auth`, `.guest`)
* [ ] ë¦¬í¬íŠ¸/ì•„í‹°íŒ©íŠ¸ í™•ì¸(trace/video/screenshot)
* [ ] CIì—ì„œ ì•ˆì •ì„± í™•ë³´(retries/worker/ë¦¬í¬í„° êµ¬ì„±)

---

## ğŸ“Œ ìš´ì˜ ë©”ëª¨

* ê¸°ëŠ¥ ë‹¨ìœ„ë¡œ í´ë”ë¥¼ êµ¬ì„±í•˜ê³  ì „ì œëŠ” íŒŒì¼ëª… ì ‘ë¯¸ì‚¬ë¡œë§Œ êµ¬ë¶„í•œë‹¤.
* `getByTestId` ì¤‘ì‹¬ìœ¼ë¡œ ì‘ì„±í•˜ì—¬ ì•ˆì •ì„±ì„ í™•ë³´í•œë‹¤.
* ëª¨ë“  í…ŒìŠ¤íŠ¸/ë¦¬ë·°/ë¬¸ì„œëŠ” í•œê¸€ë¡œ ì‘ì„±í•œë‹¤(ì½”ë“œ ì‹ë³„ìëŠ” ì˜ì–´ ê°€ëŠ¥).

